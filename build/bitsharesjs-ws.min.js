!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function r(c,s,u){function f(t,n){if(!s[t]){if(!c[t]){var e="function"==typeof require&&require;if(!n&&e)return e(t,!0);if(a)return a(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={t:{}};c[t][0].call(o.t,function(n){return f(c[t][1][n]||n)},o,o.t,r,c,s,u)}return s[t].t}for(var a="function"==typeof require&&require,n=0;n<u.length;n++)f(u[n]);return f}({1:[function(i,u,f){(function(n){"use strict";f.s=!0;var t=e(i("./ChainWebSocket")),r=e(i("./GrapheneApi")),c=e(i("./ChainConfig"));function e(n){return n&&n.s?n:{default:n}}if(n)n.u="";else;var s=!0;f.default={h:function(n){this.l=n,inst&&inst.h(n)},v:function(n){s=n},reset:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=this,e=arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return inst=new o,inst.h(t.l),inst&&e&&inst.connect(n,i),inst})},p:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3];return inst||(inst=new o,inst.h(this.l)),inst&&t&&inst.connect(n,e,i),inst},m:function(){return Apis.p().k},close:function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()}};var o=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(e,n){var i=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.url=e;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&e.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._&&(this._.l=null),this._=new t.default(e,this.l,n,s,function(){i.S&&i.S.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.T=this._.g("","").then(function(){console.log("Connected to API node:",e),i.S=new r.default(i._,"database"),i.W=new r.default(i._,"network_broadcast"),i.I=new r.default(i._,"history"),o&&(i.C=new r.default(i._,"crypto"));var n=i.S.init().then(function(){return i.S.exec("get_chain_id",[]).then(function(n){return i.k=n,c.default.N(n)})});i._.R=function(){i._.g("","").then(function(){i.S.init().then(function(){i.l&&i.l("reconnect")}),i.W.init(),i.I.init(),o&&i.C.init()})};var t=[n,i.W.init(),i.I.init()];return o&&t.push(i.C.init()),Promise.all(t)})},n.prototype.close=function(){var n=this;return this._?this._.close().then(function(){n._=null}):(this._=null,Promise.resolve())},n.prototype.V=function(){return this.S},n.prototype.P=function(){return this.W},n.prototype.A=function(){return this.I},n.prototype.O=function(){return this.C},n.prototype.h=function(n){this.l=n},n}();u.t=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{q:2,D:3,j:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var c=void 0,s={G:n.J.U||"VIN"};c={L:"VIN",G:"VIN",F:15,M:86400,H:86400,B:{K:{L:"VIN",G:"VIN",k:"ffd5043058c6c890c2d3c6c007d46379899139eb064b5a5ab75a7ac60c74e9ce"},X:{L:"VIN",G:"VIN",k:"3d883d444747a21e63596d79c67149189161c82c075494ed179261fec2ca708b"}},N:function(n){var t,e,i=void 0,o=void 0,r=void 0;for(i=0,t=(e=Object.keys(c.B)).length;i<t;i++)if(r=e[i],(o=c.B[r]).k===n)return c.Y=r,o.G&&(c.G=o.G,s.G=o.G),{Y:r,Z:o};c.Y||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){c.L="VIN",c.G="VIN",s.G="VIN",c.F=15,c.M=86400,console.log("Chain config reset")},$:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GPH";c.G=n,s.G=n}},e.default=c,t.t=e.default}).call(this,n("_process"))},{nn:7}],3:[function(e,i,o){(function(n){"use strict";o.s=!0;var u=void 0;u="undefined"!=typeof WebSocket||n.J.tn?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?e("ReconnectingWebSocket"):WebSocket:e("ws");var f=5,a=2*f,t=function(){function s(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,i=this,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.l=n,this.en=setTimeout(function(){if(i.in){var n=i.in;i.in=null,i.on.terminate?i.on.terminate():i.on.close(),n(new Error("Connection attempt timed out: "+t))}},e);var c=o||"undefined"==typeof WebSocket||"undefined"==typeof document?u:WebSocket;try{this.on=new c(t)}catch(n){console.error("invalid websocket URL:",n,t),this.on=new c("wss://127.0.0.1:8090")}this.on.rn=5e3,this.in=null,this.R=null,this.cn=f,this.sn=a,this.un=r,this.fn=new Promise(function(n,t){i.in=t,i.on.onopen=function(){clearTimeout(i.en),i.l&&i.l("open"),i.R&&i.R(),i.an=setInterval(function(){if(i.sn--,0==i.sn)return console.error("keep alive timeout."),i.on.terminate?i.on.terminate():i.on.close(),clearInterval(i.an),void(i.an=void 0);i.cn--,0==i.cn&&(i.un&&i.un(),i.cn=f)},5e3),i.in=null,n()},i.on.onerror=function(n){i.an&&(clearInterval(i.an),i.an=void 0),clearTimeout(i.en),i.l&&i.l("error"),i.in&&i.in(n)},i.on.onmessage=function(n){i.sn=a,i.listener(JSON.parse(n.data))},i.on.onclose=function(){i.an&&(clearInterval(i.an),i.an=void 0);for(var n=new Error("connection closed"),t=i.hn+1;t<=i.ln;t+=1)i.dn[t].reject(n);i.l&&i.l("closed"),i.vn&&i.vn()}}),this.ln=0,this.hn=0,this.dn={},this.wn={},this.bn={}}return s.prototype.call=function(n){var e=this;if(1!==this.on.readyState)return Promise.reject(new Error("websocket state error:"+this.on.readyState));var t=n[1];if(this.ln+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.wn[this.ln]={pn:n[2][0]},n[2][0]=this.ln),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.wn)if(this.wn[o].pn===i){this.bn[this.ln]=o;break}}var r={method:"call",mn:n};return r.id=this.ln,this.cn=f,new Promise(function(n,t){e.dn[e.ln]={time:new Date,resolve:n,reject:t},e.on.send(JSON.stringify(r))})},s.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.mn[0]),t?e=this.wn[n.id].pn:(e=this.dn[n.id],this.hn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.dn[n.id],this.bn[n.id]&&(delete this.wn[this.bn[n.id]],delete this.bn[n.id])):e&&t?e(n.mn[1]):console.log("Warning: unknown websocket response: ",n)},s.prototype.g=function(n,t){var e=this;return this.fn.then(function(){return e.call([1,"login",[n,t]])})},s.prototype.close=function(){var t=this;return new Promise(function(n){t.vn=function(){n(),t.vn=null},t.on.close(),1!==t.on.readyState&&n()})},s}();o.default=t,i.t=o.default}).call(this,e("_process"))},{kn:5,nn:7,on:6}],4:[function(n,t,e){"use strict";e.s=!0;var i=function(){function e(n,t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._=n,this._n=t}return e.prototype.init=function(){var t=this;return this._.call([1,this._n,[]]).then(function(n){return t.yn=n,t})},e.prototype.exec=function(t,e){return this._.call([this.yn,t,e]).catch(function(n){throw console.log("!!! GrapheneApi error: ",t,e,n,JSON.stringify(n)),n})},e}();e.default=i,t.t=e.default},{}],5:[function(n,t,e){var i,o;i=this,o=function(){if("undefined"!=typeof window&&"WebSocket"in window)return l.prototype.onopen=function(n){},l.prototype.onclose=function(n){},l.prototype.Sn=function(n){},l.prototype.onmessage=function(n){},l.prototype.onerror=function(n){},l.Tn=!1,l.CONNECTING=WebSocket.CONNECTING,l.OPEN=WebSocket.OPEN,l.CLOSING=WebSocket.CLOSING,l.CLOSED=WebSocket.CLOSED,l;function l(n,t,e){var i={debug:!1,gn:!0,Wn:1e3,In:3e4,Cn:1.5,rn:2e3,En:null,binaryType:"blob"};for(var o in e||(e={}),i)void 0!==e[o]?this[o]=e[o]:this[o]=i[o];this.url=n,this.Nn=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var r,c=this,s=!1,u=!1,f=null,a=document.createElement("div");function h(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}a.addEventListener("open",function(n){c.onopen(n)}),a.addEventListener("close",function(n){c.onclose(n)}),a.addEventListener("connecting",function(n){c.Sn(n)}),a.addEventListener("message",function(n){c.onmessage(n)}),a.addEventListener("error",function(n){c.onerror(n)}),this.addEventListener=a.addEventListener.bind(a),this.removeEventListener=a.removeEventListener.bind(a),this.dispatchEvent=a.dispatchEvent.bind(a),this.open=function(i){if((r=new WebSocket(c.url,t||[])).binaryType=this.binaryType,i){if(this.En&&this.Nn>this.En)return}else a.dispatchEvent(h("connecting")),this.Nn=0;(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","attempt-connect",c.url);var n=r,e=setTimeout(function(){(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","connection-timeout",c.url),u=!0,n.close(),u=!1},c.rn);r.onopen=function(n){clearTimeout(e),(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","onopen",c.url),c.protocol=r.protocol,c.readyState=WebSocket.OPEN,c.Nn=0;var t=h("open");t.Rn=i,i=!1,a.dispatchEvent(t)},r.onclose=function(n){if(clearTimeout(e),r=null,s)c.readyState=WebSocket.CLOSED,a.dispatchEvent(h("close"));else{c.readyState=WebSocket.CONNECTING;var t=h("connecting");t.code=n.code,t.reason=n.reason,t.wasClean=n.wasClean,a.dispatchEvent(t),i||u||((c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","onclose",c.url),a.dispatchEvent(h("close")));var e=c.Wn*Math.pow(c.Cn,c.Nn);f=setTimeout(function(){c.Nn++,c.open(!0)},e>c.In?c.In:e)}},r.onmessage=function(n){(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","onmessage",c.url,n.data);var t=h("message");t.data=n.data,a.dispatchEvent(t)},r.onerror=function(n){(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","onerror",c.url,n),a.dispatchEvent(h("error"))}},1==this.gn&&this.open(!1),this.send=function(n){if(r)return(c.debug||l.Tn)&&console.debug("ReconnectingWebSocket","send",c.url,n),r.send(n);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,t){void 0===n&&(n=1e3),s=!0,r&&r.close(n,t),f&&(clearTimeout(f),f=null)},this.refresh=function(){r&&r.close()}}},void 0!==t&&t.t?t.t=o():i.kn=o()},{}],6:[function(n,t,e){},{}],7:[function(n,t,e){var i,o,r=t.t={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(i===setTimeout)return setTimeout(t,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(n){try{return i.call(null,t,0)}catch(n){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(n){i=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(n){o=s}}();var f,a=[],h=!1,l=-1;function d(){h&&f&&(h=!1,f.length?a=f.concat(a):l=-1,a.length&&v())}function v(){if(!h){var n=u(d);h=!0;for(var t=a.length;t;){for(f=a,a=[];++l<t;)f&&f[l].Vn();l=-1,t=a.length}f=null,h=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(n)}}function w(n,t){this.Pn=n,this.xn=t}function b(){}r.An=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];a.push(new w(n,t)),1!==a.length||h||u(v)},w.prototype.Vn=function(){this.Pn.apply(null,this.xn)},r.title="browser",r.tn=!0,r.J={},r.On=[],r.version="",r.qn={},r.Dn=b,r.addListener=b,r.jn=b,r.Gn=b,r.removeListener=b,r.Un=b,r.Jn=b,r.Ln=b,r.Fn=b,r.Mn=function(n){return[]},r.Hn=function(n){throw new Error("process.binding is not supported")},r.zn=function(){return"/"},r.Bn=function(n){throw new Error("process.chdir is not supported")},r.Kn=function(){return 0}},{}]},{},[1])(1)});